# Request Flow and Commands

Every CRUD action is routed through a command and emits side effects.

```mermaid
sequenceDiagram
  participant UI as UI
  participant API as API Route
  participant CMD as Command
  participant QE as Query Engine
  participant IDX as Indexer
  participant DB as Database

  UI->>API: POST /api/resource
  API->>CMD: create/update/delete
  CMD->>DB: write
  CMD->>IDX: emit index event
  CMD->>QE: read for response
  QE->>DB: fetch with scope
  API-->>UI: normalized payload
```

- Commands are undoable and track side effects
- Indexing keeps search and list views fast
- Query engine enforces tenant and org scope

:::notes
Stress the command pattern as the source of truth. The query engine reads data with scope, and indexing keeps lists, search, and widgets responsive.
:::
