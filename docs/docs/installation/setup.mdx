---
title: Local setup
description: Step-by-step checklist to run Open Mercato locally.
---

Follow these steps after the [prerequisites](./prerequisites) are in place:

1. **Clone the repository**
   ```bash
   git clone https://github.com/open-mercato/open-mercato.git
   cd open-mercato
   ```
2. **Install workspace dependencies**
   ```bash
   yarn install
   ```
3. **Bootstrap everything with one command**
   ```bash
   yarn mercato init
   ```
   This script prepares module registries, generates/applies migrations, seeds default roles, provisions an admin user, and loads demo CRM data (companies, people, deals, activities, todos). Add `--no-examples` if you prefer to skip the demo content while keeping core identities, `--stresstest` (optionally with `-n <count>`) to preload thousands of synthetic contacts, companies, deals, activities, and notes, or combine `--stresstest --lite` for high-volume contacts without the heavier extras when you need raw throughput.
4. **Launch the app**
   ```bash
   yarn dev
   ```
   Navigate to `http://localhost:3000/backend` and sign in with the credentials printed by `yarn mercato init`.
   If you plan to use the email-enabled onboarding flow, opt-in by setting the following environment variables in your `.env` (the toggle defaults to `false`):
    ```env
    RESEND_API_KEY=your_resend_api_key
    APP_URL=http://localhost:3000
    EMAIL_FROM=no-reply@your-domain.com
    SELF_SERVICE_ONBOARDING_ENABLED=true
    ADMIN_EMAIL=ops@your-domain.com
    ```

   Vector search relies on OpenAI embeddings. Add the API key to `.env` to activate the command palette and Data Designer page:

   ```env
   OPENAI_API_KEY=sk-your-key
   ```

   When the variable is omitted the UI keeps the feature visible but displays a reminder banner instead of search results.

   For a full catalogue of backend flags (including profiler, cache, and query index switches) see the [System status variables](../framework/operations/system-status) referenceâ€”each entry links back to the admin System status page for quick adjustments.

![Open Mercato admin home](/screenshots/open-mercato-homepage.png)

> ðŸ’¡ Need a clean slate? Run `yarn mercato init --reinstall`. It wipes module migrations and **drops the database**, so only use it when you intentionally want to reset everything. Prefer `yarn mercato init --no-examples` if you just want an empty CRM without resetting the database.

For advanced/manual flows (custom migration control, selective seeding, etc.) see the CLI reference in the repository README.

## Docker-based setup

Prefer containers? The repo ships with a multi-stage `Dockerfile`, `.dockerignore`, and `docker-compose.yml` to boot the app plus PostgreSQL + Redis while keeping hot reload for development.

### Prerequisites

- **Docker Engine 24+** with the Compose plugin (`docker compose` CLI).
- Access to pull public images from Docker Hub (`node:20-bookworm-slim`, `pgvector/pgvector:pg15`, `redis:7-alpine`). Run `docker login` if your daemon requires credentials.
- **OPENAI_API_KEY** already exported in your shell (e.g. `export OPENAI_API_KEY=sk-â€¦`) so Docker Compose inherits it. Keeping the key outside tracked files avoids accidental leaks; Compose automatically passes through any existing shell variables unless overridden.

### Run the stack

1. Copy the sample env and tweak non-sensitive secrets for Docker:
   Export `OPENAI_API_KEY` separately from your shell so it never lands in the file:
   ```bash
   export OPENAI_API_KEY=sk-your-key
   ```
   Run `docker compose` from the same terminal so the container inherits the secret. Alternatively, pass it inline with `OPENAI_API_KEY=â€¦ docker compose up --build`.
2. Build and start everything (first run also installs dependencies and seeds the DB):
   ```bash
   docker compose up --build
   ```
   The `app` service runs `yarn install --frozen-lockfile`, `yarn mercato init --no-examples`, then `yarn dev`. Postgres (with pgvector enabled) and Redis start automatically.
3. Visit `http://localhost:3000` once the logs show `ready - started server on 0.0.0.0:3000`. The admin credentials appear in the `app` logs during `yarn mercato init`.
4. Stop containers with `Ctrl+C` or `docker compose down`. Add `-v` to wipe the database volume when you need a clean slate.
