---
title: Create your first module
description: Scaffold the Inventory module and surface its first admin page in the sidebar.
---

# Step 2: Create your first module

With the base app running, add a custom `inventory` module directly inside the app. Modules placed under `apps/mercato/src/modules/<id>/` are automatically resolved when you register them with `from: '@app'`â€”no separate package setup required.

## 1. Scaffold the module

```bash
mkdir -p apps/mercato/src/modules/inventory
touch apps/mercato/src/modules/inventory/{index.ts,acl.ts,di.ts}
```

Populate the metadata in `index.ts` so the module shows up in registries:

```ts title="apps/mercato/src/modules/inventory/index.ts"
import type { ModuleInfo } from '@open-mercato/shared/modules/registry';

export const metadata: ModuleInfo = {
  name: 'inventory',
  title: 'Inventory',
  version: '0.1.0',
  description: 'Track stock levels for sellable items.',
};
```

Declare the RBAC features you plan to enforce in `acl.ts`:

```ts title="apps/mercato/src/modules/inventory/acl.ts"
export const features = [
  { id: 'inventory.view',   title: 'View inventory',   module: 'inventory' },
  { id: 'inventory.create', title: 'Create inventory', module: 'inventory' },
  { id: 'inventory.edit',   title: 'Edit inventory',   module: 'inventory' },
  { id: 'inventory.delete', title: 'Delete inventory', module: 'inventory' },
];

export default features;
```

Create an Awilix registrar in `di.ts` even if you do not wire services yetâ€”the file keeps the structure predictable:

```ts title="apps/mercato/src/modules/inventory/di.ts"
import type { AppContainer } from '@open-mercato/shared/lib/di/container';

export function register(_: AppContainer) {
  // Register services when you introduce business logic.
}
```

## 2. Enable the module

Open `apps/mercato/src/modules.ts` and add the new entry to the `enabledModules` array:

```ts title="apps/mercato/src/modules.ts"
export const enabledModules: ModuleEntry[] = [
  // ... existing modules ...
  { id: 'inventory', from: '@app' }, // ðŸ‘ˆ new module
];
```

The `from: '@app'` value tells the generator to look for the module inside `apps/mercato/src/modules/inventory/`.

Run the generators so the new module is included in the registry:

```bash
yarn generate
```

## 3. Add the first page

Create the backend page directory and metadata:

```bash
mkdir -p apps/mercato/src/modules/inventory/backend/inventory
touch apps/mercato/src/modules/inventory/backend/inventory/page.tsx
touch apps/mercato/src/modules/inventory/backend/inventory/page.meta.ts
```

```tsx title="apps/mercato/src/modules/inventory/backend/inventory/page.tsx"
const InventoryLanding = () => {
  return (
    <div className="container">
      <h1 className="margin-bottom--md">Inventory</h1>
      <p>Welcome! You will add data grids and forms in the next steps.</p>
    </div>
  );
};

export default InventoryLanding;
```

```ts title="apps/mercato/src/modules/inventory/backend/inventory/page.meta.ts"
import type { PageMetadata } from '@open-mercato/shared/modules/registry';

export const metadata: PageMetadata = {
  title: 'Inventory',
  group: 'Operations',
  order: 20,
  requireAuth: true,
  requireFeatures: ['inventory.view'],
};
```

Restart the dev server (or wait for hot reload) and open `/backend`. You should now see an **Inventory** link in the sidebar that leads to the placeholder page.

> To see a working example of the same pattern, refer to `apps/mercato/src/modules/example/`. Core modules from `@open-mercato/core` can be replaced by adding override files under `apps/mercato/src/modules/auth`, `apps/mercato/src/modules/directory`, etc.
